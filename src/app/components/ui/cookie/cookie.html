<!-- Modale de consentement (premiÃ¨re visite) -->
@if (shouldShowModal()) {
<div class="overlay">
  <div class="modal">
    <div class="header">
      <h3 class="title">
        <span class="text-color-primary">[$COOKIE]</span> Gestion des cookies
      </h3>
    </div>

    <div class="content">
      <p class="text">
        ASMtariste.fr utilise des cookies <strong>strictement nÃ©cessaires</strong> pour 
        fonctionner correctement. Ces cookies permettent de :
      </p>

      <ul class="featureList">
        <li>âœ“ MÃ©moriser vos prÃ©fÃ©rences de navigation</li>
        <li>âœ“ Comptabiliser vos visites pour amÃ©liorer le site</li>
        <li>âœ“ Maintenir votre session de connexion</li>
        <li>âœ“ AccÃ©der au contenu premium (si contributeur)</li>
      </ul>

      @if (showDetails()) {
      <div class="details">
        <h4 class="subtitle">DonnÃ©es collectÃ©es :</h4>
        <ul class="list">
          <li>ğŸŒ <strong>Langue du navigateur</strong> - pour adapter le contenu</li>
          <li>ğŸ“Š <strong>Nombre total de visites</strong> - pour amÃ©liorer le site</li>
          <li>ğŸ“… <strong>Dates de premiÃ¨re et derniÃ¨re visite</strong> - statistiques</li>
        </ul>
        <p class="note">
          Ces donnÃ©es sont stockÃ©es <strong>uniquement sur votre appareil</strong> (localStorage) 
          et ne sont jamais transmises Ã  des tiers.
        </p>
      </div>
      }

      <button class="detailsBtn" (click)="toggleDetails()">
        {{ showDetails() ? 'â–² Masquer les dÃ©tails' : 'â–¼ Voir les dÃ©tails' }}
      </button>

      <div class="warning">
        âš ï¸ <strong>Important :</strong> Sans ces cookies, vous ne pourrez pas accÃ©der 
        au contenu du site.
      </div>
    </div>

    <div class="actions">
      <button class="btn btnAccept btn--primary text-color-white" (click)="handleAccept()">
        âœ“ Accepter et continuer
      </button>
      <button class="btn btnRefuse btn--ghost text-color-white" (click)="handleRefuse()">
        âœ— Refuser (bloque l'accÃ¨s)
      </button>
    </div>

    <div class="footer">
      <a routerLink="/mentions-legales" class="link">Mentions lÃ©gales</a>
      <span class="separator">â€¢</span>
      <a routerLink="/politique-confidentialite" class="link">Politique de confidentialitÃ©</a>
    </div>
  </div>
</div>
}

<!-- Mur de blocage (aprÃ¨s refus des cookies) -->
@if (shouldShowWall()) {
<div class="overlay">
  <div class="modal wall">
    <div class="header">
      <h3 class="title">
        <span class="text-color-primary">ğŸš«</span> AccÃ¨s bloquÃ©
      </h3>
    </div>

    <div class="content">
      <p class="text">
        Vous avez <strong>refusÃ© les cookies</strong> nÃ©cessaires au fonctionnement du site.
      </p>
      
      <p class="text">
        Sans ces cookies, ASMtariste.fr ne peut pas :
      </p>

      <ul class="featureList">
        <li>âœ— MÃ©moriser vos prÃ©fÃ©rences</li>
        <li>âœ— AmÃ©liorer votre expÃ©rience de navigation</li>
        <li>âœ— Vous permettre d'accÃ©der au contenu</li>
      </ul>

      <div class="warning">
        ğŸ’¡ <strong>Pour accÃ©der au site :</strong> Vous devez accepter les cookies 
        strictement nÃ©cessaires.
      </div>
    </div>

    <div class="actions">
      <button class="btn btnAccept btn--primary text-color-white" (click)="reopenBanner()">
        âœ“ Modifier mon choix
      </button>
    </div>

    <div class="footer">
      <a routerLink="/mentions-legales" class="link">Mentions lÃ©gales</a>
      <span class="separator">â€¢</span>
      <a routerLink="/politique-confidentialite" class="link">Politique de confidentialitÃ©</a>
    </div>
  </div>
</div>
}