<div class="diagonalWrapper index2"></div>
<h1 class="title text-color-primary index2">{{ folderName }}<br /></h1>
<p class="description text-color-white index2">{{ folderDescription }}</p>

<div class="container">
  <div class="header">
    <button class="backBtn" (click)="goBack()">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
        <path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8l8 8l1.41-1.41L7.83 13H20z"/>
      </svg>
      Retour √† l'accueil
    </button>
  </div>

  @if(isLoading()) {
    <div class="loading">
      <div class="spinner"></div>
      <p>Chargement des fichiers...</p>
    </div>
  }

  @if(error()) {
    <div class="error">
      <p>‚ùå {{ error() }}</p>
    </div>
  }

  @if(!isLoading() && !error() && groupedFiles().length > 0) {
    <div class="content">
      @for(group of groupedFiles(); track group.label) {
        <section class="group">
          <button  class="groupHeader"  (click)="toggleGroup(group.label)" type="button">
            <div class="groupTitle">
              <span class="icon">üìÅ</span>{{ group.label }}<span class="count">({{ group.files.length }})</span>
            </div>
            <svg  class="chevron"  [class.open]="isGroupOpen(group.label)" xmlns="http://www.w3.org/2000/svg"  width="20"  height="20"  viewBox="0 0 24 24">
              <path fill="currentColor" d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6l-6-6z"/>
            </svg>
          </button>
          
          @if(isGroupOpen(group.label)) {
            <div class="fileList">
              @for(file of group.files; track file.id_files) {
                <article app-file-item [id_file]="file.id_files" [id_label]="file.label.id_label" [name]="file.name" [description]="file.description" [label]="file.label.name" [levelRequired]="file.level_required"></article>
              }
            </div>
          }
        </section>
      }
    </div>
  }

  @if(!isLoading() && !error() && groupedFiles().length === 0) {
    <div class="empty">
      <p>üìÇ Aucun fichier disponible dans ce dossier</p>
    </div>
  }
</div>